# Техническое задание
## Название: brWardrobe
## Версия Minecraft: 1.16.5+
## Совместимость: Spigot/Paper

---

## Описание

Плагин добавляет в игру персональный гардероб, который позволяет игрокам сохранять комплекты брони и мгновенно переключаться между ними. Гардероб открывается по команде и представляет собой GUI-интерфейс.

Каждый доступный комплект представлен в виде вертикального столбца, состоящего из 4 слотов для брони и одного слота для кнопки управления. Игроки могут экипировать сет, сохранить текущий надетый сет или вручную перемещать отдельные части брони между ячейками гардероба.

Количество доступных для использования комплектов (столбцов) гибко настраивается через систему прав доступа.

---

## Функционал

1.  **Основная команда**
    -   Игрок открывает гардероб командой (напр., `/wardrobe`).
    -   Требуется право на использование: `brwardrobe.use`.

2.  **Управление сетами через кнопки**
    -   Под каждым столбцом с броней находится кнопка управления (напр., краситель).
    -   **Если столбец содержит броню:** Кнопка имеет вид "Экипировать". При нажатии на неё, броня из этого столбца меняется местами с бронёй, надетой на игроке.
    -   **Если столбец пустой:** Кнопка имеет вид "Сохранить". При нажатии на неё, текущая надетая на игроке броня перемещается в этот столбец.
    -   Внешний вид (предмет, название, описание) обеих кнопок настраивается в конфиге.

3.  **Ручное управление предметами**
    -   Игрок может свободно перемещать предметы брони между ячейками гардероба (например, перетащить шлем из одного сета в другой).
    -   Действие разрешено только для соответствующих типов слотов (шлем можно положить только в слот для шлема).
    -   Игрок может забирать и класть предметы из своего инвентаря в соответствующие слоты гардероба.

4.  **Динамическое количество слотов**
    -   Количество доступных сетов (столбцов) определяется правами.
    -   Право имеет вид `brwardrobe.slots.X`, где `X` — количество доступных сетов. (Например, `brwardrobe.slots.5` даёт доступ к 5 сетам).
    -   Если у игрока несколько таких прав, плагин предоставляет ему **максимальное** количество слотов.
    -   В конфиге можно установить количество слотов по умолчанию для игроков без специальных прав.

5.  **Настройки GUI**
    -   Возможность настроить название GUI.
    -   Возможность настроить расположение слотов для каждого элемента брони и кнопки управления в пределах одного столбца.
    -   Возможность настроить смещение для каждого следующего столбца.
    -   Возможность настроить декоративные предметы, заполняющие пустые и заблокированные слоты.
    -   Возможность настроить предметы-заполнители для пустых слотов брони (например, серый контур шлема в пустом слоте для шлема).

6.  **Хранение данных**
    -   Данные о сохраненных сетах брони каждого игрока должны сохраняться между перезагрузками сервера (рекомендуется SQLite или YAML по UUID игрока).

7.  **Конфиг**
    -   Все сообщения, команда, настройки GUI и предметов — полностью настраиваемые.

8.  **onEnable**
    -   При включении плагина в консоль выводить:
        ```
        =============================================
         Плагин разработан в BRICK Studio
         ➥ Telegram: https://t.me/brickstu
        =============================================
        ```

---

## Пример config.yml

```yaml
# Команда для открытия гардероба
command: "wardrobe"

# Количество слотов (сетов) по умолчанию для игроков без прав
default-slots: 1

# --- Права ---
# brwardrobe.use - доступ к команде
# brwardrobe.slots.X - где X это количество доступных сетов.
# Плагин выберет максимальное значение из всех прав игрока.

messages:
  no-permission: "§cУ вас нет права использовать гардероб."
  set-equipped: "§aВы успешно сменили комплект брони!"
  set-stored: "§aВы сохранили комплект брони в гардероб!"
  action-failed: "§cНе удалось выполнить действие."

gui:
  title: "§8Персональный гардероб"
  # Размер инвентаря. Должен вмещать все возможные сеты. 54 слота = 9 сетов.
  size: 54

  # Расположение слотов для первого сета и смещение для последующих.
  layout:
    # Слоты для первого комплекта (нумерация с 0)
    first-set-slots:
      helmet: 10
      chestplate: 19
      leggings: 28
      boots: 37
      action-button: 46
    # На сколько слотов смещаться по горизонтали для каждого следующего сета
    offset-per-set: 1

  # Настройка предметов в интерфейсе
  items:
    # Предмет, заполняющий все неиспользуемые и заблокированные ячейки
    decorative-pane:
      type: "BLACK_STAINED_GLASS_PANE"
      name: " "

    # Кнопка управления под сетом
    action-button:
      # Когда в столбце есть хотя бы 1 предмет брони
      when-full:
        type: "LIME_DYE"
        name: "§aЭкипировать комплект"
        lore:
          - "§7Нажмите, чтобы надеть этот"
          - "§7комплект. Ваша текущая броня"
          - "§7будет помещена сюда."
      # Когда столбец полностью пуст
      when-empty:
        type: "GRAY_DYE"
        name: "§eСохранить текущий комплект"
        lore:
          - "§7Нажмите, чтобы сохранить"
          - "§7надетую на вас броню."

    # Предметы-заполнители для пустых слотов под броню
    placeholders:
      helmet:
        type: "CHAINMAIL_HELMET"
        name: "§7Слот для шлема"
      chestplate:
        type: "CHAINMAIL_CHESTPLATE"
        name: "§7Слот для нагрудника"
      leggings:
        type: "CHAINMAIL_LEGGINGS"
        name: "§7Слот для поножей"
      boots:
        type: "CHAINMAIL_BOOTS"
        name: "§7Слот для ботинок"
```
